(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{170:function(e,t,a){},174:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(21),s=a.n(l),r=(a(95),a(14)),i=a(15),c=a(17),d=a(16),h=a(18),u=a(32),m=(a(97),a(204)),p=a(199),g=a(206),f=a(201),b=a(205),E=a(197),v=a(202),w=(a(99),a(37)),N=a.n(w),S=a(196),k=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={formStyle:"form-control-header"},a.onChange=function(e){a.props.zipChange(e.target.value)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e;return localStorage.token&&(e=N()(localStorage.token).username),o.a.createElement("div",null,o.a.createElement(f.a,{inverse:!0,collapseOnSelect:!0},o.a.createElement(f.a.Header,null,o.a.createElement(f.a.Brand,null,o.a.createElement(S.a,{to:"/"},"Ate-Ball")),o.a.createElement(f.a.Toggle,null)),o.a.createElement(f.a.Collapse,null,o.a.createElement(b.a,null),this.props.isLoggedIn?o.a.createElement(b.a,{pullRight:!0},o.a.createElement(E.a,{componentClass:S.a,href:"/user/"+e,to:"/user/"+e,className:"header-link"},"Hello, ",e&&e.charAt(0).toUpperCase()+e.slice(1)),o.a.createElement(E.a,{eventKey:2,className:"header-link",onClick:this.props.handleLogout},"Logout"),o.a.createElement(E.a,null,o.a.createElement("div",{className:"flex-zip"},o.a.createElement("div",{className:"header-link"},"Current zip: "),o.a.createElement(v.a,{maxLength:"6",className:this.props.zip?this.state.formStyle:this.props.zipShake,type:"number",onChange:this.onChange,value:this.props.zip})))):o.a.createElement(b.a,{pullRight:!0},o.a.createElement(E.a,{eventKey:1,componentClass:S.a,href:"/login",to:"/login",className:"header-link"},"Login"),o.a.createElement(E.a,{eventKey:2,componentClass:S.a,href:"/signup",to:"/signup",className:"header-link"},"Signup"),o.a.createElement(E.a,null,o.a.createElement("div",{className:"flex-zip"},o.a.createElement("div",null,"Current zip: "),o.a.createElement(v.a,{maxLength:"6",className:"form-control-header",type:"text",onChange:this.onChange,value:this.props.zip})))))))}}]),t}(n.Component),C=a(22),y=a.n(C),I=a(27),O=(a(79),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:""},a.handleChange=function(e){a.setState(Object(I.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.handleLogIn(a.state)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"accountLogin"},o.a.createElement("div",{className:"loginImage"}),o.a.createElement("div",{className:"sideForm"},o.a.createElement("form",{onSubmit:this.handleSubmit,className:"LoginForm"},o.a.createElement("h1",null,"Login"),o.a.createElement("p",{className:"warning"},this.props.loginError),o.a.createElement("div",{className:"loginForm--head"},o.a.createElement("label",{htmlFor:""},"Username"),o.a.createElement("input",{name:"username",onChange:this.handleChange,placeholder:"Username"}),o.a.createElement("label",{htmlFor:""},"Password"),o.a.createElement("input",{name:"password",onChange:this.handleChange,type:"password",placeholder:"Password"})),o.a.createElement("button",{type:"submit",className:"green-button"},"Login"))))}}]),t}(n.Component)),F=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:"",food1:"",food2:"",food3:"",food4:"",food5:"",food6:""},a.handleInput=function(e){a.setState(Object(I.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.handleSignup(a.state)},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"accountLogin"},o.a.createElement("div",{className:"signupImage"}),o.a.createElement("div",{className:"sideForm2"},o.a.createElement("form",{onSubmit:this.handleSubmit,className:"LoginForm"},o.a.createElement("h1",null,"Signup"),o.a.createElement("p",{className:"warning"},this.props.signupError),o.a.createElement("div",{className:"loginForm--head"},o.a.createElement("label",{htmlFor:""},"Username"),o.a.createElement("input",{name:"username",onChange:this.handleInput,placeholder:"Username"}),o.a.createElement("label",{htmlFor:""},"Password"),o.a.createElement("input",{name:"password",onChange:this.handleInput,type:"password",placeholder:"Password"})),o.a.createElement("div",{className:"foods"},o.a.createElement("div",{className:"foods--list"},o.a.createElement("label",{htmlFor:""},"Food 1"),o.a.createElement("input",{className:"foodInput",name:"food1",onChange:this.handleInput,placeholder:"Food 1"}),o.a.createElement("label",{htmlFor:""},"Food 2"),o.a.createElement("input",{className:"foodInput",name:"food2",onChange:this.handleInput,placeholder:"Food 2"}),o.a.createElement("label",{htmlFor:""},"Food 3"),o.a.createElement("input",{className:"foodInput",name:"food3",onChange:this.handleInput,placeholder:"Food 3"})),o.a.createElement("div",{className:"foods--list"},o.a.createElement("label",{htmlFor:""},"Food 1"),o.a.createElement("input",{className:"foodInput",name:"food4",onChange:this.handleInput,placeholder:"Food 1"}),o.a.createElement("label",{htmlFor:""},"Food 2"),o.a.createElement("input",{className:"foodInput",name:"food5",onChange:this.handleInput,placeholder:"Food 2"}),o.a.createElement("label",{htmlFor:""},"Food 3"),o.a.createElement("input",{className:"foodInput",name:"food6",onChange:this.handleInput,placeholder:"Food 3"}))),o.a.createElement("button",{type:"submit",className:"green-button"},"Signup"))))}}]),t}(n.Component),j=(a(170),a(198)),L="5333911bf4dfd7956564c2dbbd13de65",z=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={ballClass:"eight-ball hide",triangleClass:"triangle",randomPick:{},clicked:!1,website:"https://www.google.com/maps/search/?api=1&query="},a.riseBall=function(){a.state.clicked?a.setState({ballClass:"eight-ball rise shake"}):a.setState({ballClass:"eight-ball rise"})},a.hideBall=function(){a.state.clicked?a.setState({ballClass:"eight-ball rise shake"}):a.setState({ballClass:"eight-ball lower"})},a.randomRestaurant=function(){y.a.get("https://developers.zomato.com/api/v2.1/search?lat=".concat(a.props.latitude,"&lon=").concat(a.props.longitude,"&radius=8000"),{headers:{"user-key":L}}).then(function(e){console.log(e),a.setState({randomPick:e.data.restaurants[Math.floor(Math.random()*e.data.restaurants.length)].restaurant})}).finally(function(e){a.setState({website:a.state.website+a.state.randomPick.location.address})})},a.showTriangle=function(e){a.randomRestaurant(),e.preventDefault(),a.setState({triangleClass:"triangle triangle-show",ballClass:"eight-ball rise shake",clicked:!0})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("ul",{className:"slideshow"},o.a.createElement("li",null),o.a.createElement("li",null),o.a.createElement("li",null),o.a.createElement("li",null),o.a.createElement("li",null),o.a.createElement("div",{className:"hero-text"},o.a.createElement("h1",null,"Ate-Ball"),o.a.createElement(j.a,{bsStyle:"success",onMouseEnter:this.riseBall,onMouseLeave:this.hideBall,onClick:this.showTriangle,className:"splash-button"},"Random Diner")),o.a.createElement("div",{className:this.state.ballClass},o.a.createElement("div",{className:this.state.triangleClass},o.a.createElement("a",{href:this.state.website,target:"_blank",rel:"noopener noreferrer"},this.state.randomPick.name,o.a.createElement("br",null)))))}}]),t}(n.Component),B=(a(174),a(200)),M="https://ateball.herokuapp.com",R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).styleBegins=function(e){e.preventDefault(),a.setState({modalClass:"modal-appear"})},a.styleEnds=function(){a.setState({modalClass:"modal-disappear"})},a.shake=function(){a.props.user.food1&&a.props.zip?(a.setState({titleShow:"ateball-title",ballMessage:"The AteBall has decided. You will dine in..."}),a.randomRestaurant("&location=".concat(a.props.zip)),a.setState({ateballRise:"ateball ateball-shake",triangleShow:"ateball-triangle ateball-triangle-show"})):(a.props.zipShake(),a.setState({titleShow:"ateball-title ateball-title-show",ballMessage:"Please provide an appropriate zip code"}))},a.randomRestaurant=function(e){var t=[a.props.user.food1,a.props.user.food2,a.props.user.food3,a.props.user.food4,a.props.user.food5,a.props.user.food6];y.a.get("".concat(M,"/api/yelp"),{headers:{foodChoice:t[Math.floor(Math.random()*t.length)],extension:e}}).then(function(e){var t=e.data.businesses[Math.floor(Math.random()*e.data.businesses.length)];console.log(t.transactions),a.setState({restaurantName:t.name,titleShow:"ateball-title ateball-title-show",website:a.state.website+t.location.display_address,clicked:!0,phoneNumber:t.display_phone,image:t.image_url,isclosed:t.is_closed,rating:t.rating,price:t.price,address:t.location.display_address,url:t.url})}).catch(function(e){console.log(e)})},a.stars=function(){var e=a.canvasRef.current,t=e.getContext("2d"),n=e.width=window.innerWidth,o=e.height=window.innerHeight,l=217,s=[],r=0,i=document.createElement("canvas"),c=i.getContext("2d");i.width=100,i.height=100;var d=i.width/2,h=c.createRadialGradient(d,d,0,d,d,d);function u(e,t){if(arguments.length<2&&(t=e,e=0),e>t){var a=t;t=e,e=a}return Math.floor(Math.random()*(t-e+1))+e}h.addColorStop(.025,"#fff"),h.addColorStop(.1,"hsl("+l+", 61%, 33%)"),h.addColorStop(.25,"hsl("+l+", 64%, 6%)"),h.addColorStop(1,"transparent"),c.fillStyle=h,c.beginPath(),c.arc(d,d,d,0,2*Math.PI),c.fill();var m=function(){this.orbitRadius=u(function(e,t){var a=Math.max(e,t);return Math.round(Math.sqrt(a*a+a*a))/2}(n,o)),this.radius=u(60,this.orbitRadius)/12,this.orbitX=n/2,this.orbitY=o/2,this.timePassed=u(0,500),this.speed=u(this.orbitRadius)/5e4,this.alpha=u(2,10)/10,s[++r]=this};m.prototype.draw=function(){var e=Math.sin(this.timePassed)*this.orbitRadius+this.orbitX,a=Math.cos(this.timePassed)*this.orbitRadius+this.orbitY,n=u(10);1===n&&this.alpha>0?this.alpha-=.05:2===n&&this.alpha<1&&(this.alpha+=.05),t.globalAlpha=this.alpha,t.drawImage(i,e-this.radius/2,a-this.radius/2,this.radius,this.radius),this.timePassed+=this.speed};for(var p=0;p<500;p++)new m;!function e(){t.globalCompositeOperation="source-over",t.globalAlpha=.8,t.fillStyle="hsla("+l+", 64%, 6%, 1)",t.fillRect(0,0,n,o),t.globalCompositeOperation="lighter";for(var a=1,r=s.length;a<r;a++)s[a].draw();window.requestAnimationFrame(e)}()},a.canvasRef=o.a.createRef(),a.state={ateballRise:"ateball",ballMessage:"The AteBall has decided. You will dine in...",triangleShow:"ateball-triangle",titleShow:"ateball-title",restaurantName:"",website:"https://google.com/maps/search/?api=1&query=",clicked:!1,phoneNumber:"",image:"",isclosed:!0,rating:"",price:"",address:"",url:"",type:"",modalClass:"modal-disappear"},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.stars(),this.setState({ateballRise:"ateball ateball-rise"}),window.addEventListener("resize",this.stars)}},{key:"render",value:function(){return o.a.createElement("div",{className:"wrap"},o.a.createElement("h1",{className:this.state.titleShow},this.state.ballMessage),this.state.clicked?o.a.createElement("div",{className:this.state.ateballRise},o.a.createElement("div",{className:this.state.triangleShow},o.a.createElement("a",{onClick:this.styleBegins,rel:"noopener noreferrer",target:"_blank",className:"restaurant-name",href:"#"},this.state.restaurantName,o.a.createElement("br",null)))):o.a.createElement("div",{onClick:this.shake,className:this.state.ateballRise},o.a.createElement("div",{className:this.state.triangleShow},o.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",className:"restaurant-name",href:this.state.website},this.state.restaurantName,o.a.createElement("br",null)))),o.a.createElement("canvas",{id:"canvas",ref:this.canvasRef}),o.a.createElement("div",{id:this.state.modalClass,className:"static-modal"},o.a.createElement(B.a.Dialog,null,o.a.createElement(B.a.Body,null,o.a.createElement("ul",{className:"modalBox"},o.a.createElement("h1",{className:"modalHeader"},this.state.restaurantName),o.a.createElement("li",{className:"modalBox--list"},o.a.createElement("img",{className:"modalBox--image",src:this.state.image,alt:"location/food snap shot"})),o.a.createElement("li",{className:"modalBox--list"},this.state.is_closed?o.a.createElement("span",null):o.a.createElement("img",{className:"open",src:"/open.png"})),o.a.createElement("li",{className:"modalBox--list"},this.state.address[0]),o.a.createElement("li",{className:"modalBox--list"},this.state.address[1]),o.a.createElement("li",{className:"modalBox--list"},this.state.phoneNumber),o.a.createElement("li",{className:"modalBox--list"},"Rating:"+this.state.rating),o.a.createElement("li",{className:"modalBox--list"},this.state.price),o.a.createElement("a",{className:"website",rel:"noopener noreferrer",target:"_blank",href:this.state.website},"Directions")),o.a.createElement("div",{className:"modal--footer"},o.a.createElement("a",{className:"green-button",href:"#",onClick:this.styleEnds},"Close"),o.a.createElement("a",{className:"red-button-yelp",target:"_blank",href:this.state.url},"Yelp It"))))))}}]),t}(n.Component),x="https://ateball.herokuapp.com",P=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleInput=function(e){a.setState(Object(I.a)({},e.target.name,e.target.value))},a.updateFoods=function(e){e.preventDefault(),localStorage.token&&y.a.put("".concat(x,"/users/").concat(a.props.user.id),a.state,{headers:{authorization:"Bearer"+localStorage.token}}).then(function(e){localStorage.token=e.data.token}).then(function(e){a.props.setUser(),a.setState({food1:"",food2:"",food3:"",food4:"",food5:"",food6:""})}).catch(function(e){console.log(e)})},a.deleteAccount=function(){localStorage.token&&y.a.delete("".concat(x,"/users/").concat(a.props.user.id),{headers:{authorization:"Bearer"+localStorage.token}}).then(function(e){a.props.handleLogout()}).then(function(e){a.props.history.push("/")})},a.state={food1:"",food2:"",food3:"",food4:"",food5:"",food6:""},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.setUser()}},{key:"render",value:function(){var e=this.props.user;return o.a.createElement("div",{className:"show-page"},o.a.createElement("div",{className:"ShowImage"},o.a.createElement("h1",{className:"show-title"},e.username&&"Welcome "+e.username.charAt(0).toUpperCase()+e.username.slice(1)+"!"),o.a.createElement("form",{onSubmit:this.updateFoods,className:"LoginForm2"},o.a.createElement("div",{className:"foods2"},o.a.createElement("div",{className:"foods--list2"},o.a.createElement("h1",null,"Person 1's foods"),o.a.createElement("label",{htmlFor:""},"Food 1"),o.a.createElement("input",{value:this.state.food1,className:"foodInput",spellCheck:"true",required:!0,name:"food1",onChange:this.handleInput,placeholder:e.food1}),o.a.createElement("label",{htmlFor:""},"Food 2"),o.a.createElement("input",{value:this.state.food2,className:"foodInput",required:!0,name:"food2",spellCheck:"true",onChange:this.handleInput,placeholder:e.food2}),o.a.createElement("label",{htmlFor:""},"Food 3"),o.a.createElement("input",{value:this.state.food3,className:"foodInput",spellCheck:"true",required:!0,name:"food3",onChange:this.handleInput,placeholder:e.food3})),o.a.createElement("div",{className:"foods--list2"},o.a.createElement("h1",null,"Person 2's foods"),o.a.createElement("label",{htmlFor:""},"Food 1"),o.a.createElement("input",{value:this.state.food4,className:"foodInput",required:!0,name:"food4",spellCheck:"true",onChange:this.handleInput,placeholder:e.food4}),o.a.createElement("label",{htmlFor:""},"Food 2"),o.a.createElement("input",{value:this.state.food5,className:"foodInput",spellCheck:"true",required:!0,name:"food5",onChange:this.handleInput,placeholder:e.food5}),o.a.createElement("label",{htmlFor:""},"Food 3"),o.a.createElement("input",{value:this.state.food6,className:"foodInput",spellCheck:"true",name:"food6",onChange:this.handleInput,required:!0,placeholder:e.food6}))),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",className:"green-button save-button"},"Save foods"),o.a.createElement("span",{className:"hide-mobile"},"or"),o.a.createElement(S.a,{to:"/ateball",className:"green-button"},"Ateball me!")),o.a.createElement("button",{onClick:this.deleteAccount,className:"red-button"}))))}}]),t}(n.Component),A="AIzaSyDGpcbl_iqDQvUb-qa_-r1nh3In4QXL-xo",_="https://ateball.herokuapp.com",U=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).setUser=function(){localStorage.token&&a.setState({isLoggedIn:!0,loginError:"",user:N()(localStorage.token)})},a.newFoods=function(e){a.setState({user:e})},a.handleLogIn=function(e){y.a.post("".concat(_,"/users/login"),{username:e.username,password:e.password}).then(function(e){localStorage.token=e.data.token,a.setState({isLoggedIn:!0,loginError:""}),a.props.history.push("/")}).catch(function(e){return a.setState({loginError:"Wrong username/password"})})},a.handleLogout=function(){a.setState({username:"",password:"",isLoggedIn:!1}),localStorage.clear(),a.props.history.push("/")},a.handleSignup=function(e){y.a.post("".concat(_,"/users/signup"),{username:e.username,password:e.password,food1:e.food1,food2:e.food2,food3:e.food3,food4:e.food4,food5:e.food5,food6:e.food6}).then(function(e){localStorage.token=e.data.token,a.setState({isLoggedIn:!0,signupError:""}),a.props.history.push("/")}).catch(function(e){a.setState({signupError:"Username taken."})})},a.zipChange=function(e){a.setState({zip:e})},a.zipShake=function(){a.setState({zipShake:"form-control-header red-warning zip-shake"})},a.changeZipBasedOnCoordinates=function(){a.state.longitude&&a.state.latitude&&y.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(a.state.latitude,",").concat(a.state.longitude,"&key=").concat(A)).then(function(e){e.data.results[0].address_components[6].long_name&&a.setState({zip:e.data.results[0].address_components[6].long_name})})},a.state={latitude:"",longitude:"",zip:"",zipShake:"form-control-header red-warning",isLoggedIn:!1,loginError:"",signupError:"",user:{username:"",id:"",food1:"",food2:"",food3:"",food4:"",food5:"",food6:""},updateError:""},a.getMyLocation=a.getMyLocation.bind(Object(u.a)(Object(u.a)(a))),a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getMyLocation(),this.setUser()}},{key:"getMyLocation",value:function(){var e=this,t=window.navigator&&window.navigator.geolocation;t&&t.getCurrentPosition(function(t){e.setState({latitude:t.coords.latitude,longitude:t.coords.longitude},function(){e.changeZipBasedOnCoordinates()})},function(e){console.log("no lat and long received from location getter")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(k,{zipShake:this.state.zipShake,zipChange:this.zipChange,zip:this.state.zip,handleLogout:this.handleLogout,name:this.state.user.username,isLoggedIn:this.state.isLoggedIn}),o.a.createElement("main",null,o.a.createElement(m.a,null,o.a.createElement(p.a,{path:"/user/:username",render:function(){return o.a.createElement(P,Object.assign({handleLogout:e.handleLogout,setUser:e.setUser,newFoods:e.newFoods},e.props,e.state))}}),o.a.createElement(p.a,{path:"/ateball",render:function(){return o.a.createElement(R,{zipShake:e.zipShake,zip:e.state.zip,latitude:e.state.latitude,longitude:e.state.longitude,user:e.state.user,ateBallMain:e.ateBallMain})}}),o.a.createElement(p.a,{path:"/signup",render:function(){return o.a.createElement(F,Object.assign({handleSignup:e.handleSignup},e.state))}}),o.a.createElement(p.a,{path:"/login",render:function(){return o.a.createElement(O,Object.assign({handleLogIn:e.handleLogIn},e.state))}}),o.a.createElement(p.a,{path:"/",render:function(){return o.a.createElement(z,{latitude:e.state.latitude,longitude:e.state.longitude})}}))))}}]),t}(n.Component),D=Object(g.a)(U);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=a(203);s.a.render(o.a.createElement(q.a,null,o.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},79:function(e,t,a){},90:function(e,t,a){e.exports=a(195)},95:function(e,t,a){},97:function(e,t,a){},99:function(e,t,a){}},[[90,2,1]]]);
//# sourceMappingURL=main.7dca8486.chunk.js.map